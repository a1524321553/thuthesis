% !TeX root = ../main.tex

\chapter{总结与展望}

\section{工作总结}

软件验证与软件确认一直是软件研发过程中不可或缺且十分重要的步骤。本文围绕软件验证与确认在生产实践中面临的两类具体问题提出了有针对性的解决方案。其一，针对当前线性区间抽象域因表示能力不足而造成的程序分析精度损失的问题，本文提出了基于符号敏感的区间算数的整型缺陷检测方法。它提高了当前区间抽象域的表示能力，且在保证分析效率的情况下提升了分析精度；其二，针对当前软件确认过程中因程序理解困难而造成的工作低效问题，本文提出了基于精确值流图的整型变量关系分析与缺陷检测方法。借助生成的模块摘要，研发人员可方便的确认程序语义与需求是否相符，发现细微的语义差异，可有效提升程序理解效率并进一步应用于缺陷分析。总体上，本文完成了如下工作内容：

\begin{enumerate}
	\item 基于符号敏感的区间算数的整型缺陷检测方法。为了实现这一目标，本文首先进行了线性区间理论域的设计，设计的核心目标有两点，其一是增加表示符号性的能力，其二是将单独区间表示改换为多区间表示。为此，本文依次定义了线性区间Range、线性多区间MultiRange以及符号敏感的线性多区间SignRange。通过定义理论域、设计计算规则并优化特定情况下的运算，SignRange能够较好的表示程序中整型变量的可能取值范围。另一方面，为了实现程序语义的表示与分析，本文定义了区间状态RangeState来描述程序的每个状态，通过设计抽象域与变迁规则，实现了模拟程序状态的变迁，从而实现程序的语义分析。最后，通过设计RangeState上的缺陷检测规则，实现了程序的整型缺陷检测。
	
	\item 基于精确值流图的程序理解与需求确认方法。为了实现这一目标，本文首先通过一个具体案例，分析了程序的摘要对程序理解的帮助。本文对精确值流图的定义和构造方法做出了说明，并基于精确值流图，设计了程序语义的抽取方法。具体地，本文设计了关于变量表达式的抽象域的设计、变迁规则的设计与表达式分析算法的设计。在上述的基础上，实现对程序整型变量在不同程序路径下的取值关系进行语义抽取。最后，借助得到的语义信息生成模块摘要。
	
	\item 模块实现。在提出以上两点的问题解决方案后，本文对其中提到的方法进行了编码实现。基于Tsmart-V3静态分析框架所提供的完备的函数接口，可以方便的获取如控制流自动机、精确值流图等信息。通过编程得到相应工具后，本文设计了一系列的实验，通过实验验证了工具、算法的有效性与实用性。
\end{enumerate}

目前，本文的部分工作已集成至Tsmart-V3工具中，并成功应用于某研究所的生产研发环节。在其自主研发的操作系统上，应用Tsmart已成功帮助其确认了代码中存在的缺陷。具有较好的实际应用价值。

\section{研究展望}

在现有研究工作内容的基础上，为了进一步提高分析的效率和精度，可以针对如下两个方面展开工作：

\begin{enumerate}
	\item 优化位敏感区间的抽象表示。在\ref{sec:SignRange}小节中，为了实现对整型变量符号性的抽象表示，本文定义了符号性Signedness理论域，并结合线性多区间，对程序中具有符号性意义的整型变量提供了抽象表示。但这对理论域的编码实现带来了困难：试想，一个具有符号性的整型变量，其在计算机上的存储内容对固定值而言是不变的，但本文提出的抽象域对同一数值依据不同符号性构造了有符号和无符号两个不同的抽象表示，并设计了算法在其之间做符号性的转化。为了优化位敏感区间的抽象表示方法，我们可以设计新的理论域：这个理论域可以忠实于整型变量在计算机上的二进制串表示，并设计解析规则，对同一个表示整型数字的二进制串根据其符号性不同而使用不同的解析方式，从而得到具体的整数值。这样做所带来的好处是可以进一步减少程序分析所消耗的内存以及更加便于编码实现。
	
	\item 优化程序分析中对循环的处理方式。在\ref{sec:区间算数评估与结果}小节和\ref{sec:值流图评估与结果}小节中，造成工具在试验中产生误报的原因均由程序分析在循环上的处理策略造成的。为了追求静态分析精度与效率的平衡，现有技术通常采用循环不变式技术来计算程序在循环中的行为。为了进一步优化现有分析精度，应分别对整型分析与变量表达式分析这两个模块在循环不变式上的计算方式做优化。
\end{enumerate}


%软件的验证与确认在软件研发过程中一直是重点关注的内容。本文聚焦于帮助开发人员快速发现并定位软件中可能存在的数值导向型缺陷，以及
%
%减少软件验证中存在的困难，同时通过
%
%同时聚焦于帮助软件维护人员解决软件确认过程中程序理解困难的问题，从而加速软件确认工作的效率。
%
%提出了基于精确值流图的程序理解与需求确认方法。总体上，本文完成了以下工作内容：
%
%\begin{enumerate}[1）]
%	\item 设计并实现了线性区间理论域，它以区间的形式刻画了C语言整型变量的可能取值范围。主要解决的技术难点是线性区间理论域的设计。
%\end{enumerate}
%
%
%其核心是理论域的设计。本章先介绍了整体的区间设计，随后依次对各个抽象层面进行介绍，并结合控制流自动机，设计了整型变量的缺陷检测规则。最后，在基于Tsmart-V3静态分析框架上做了实现，并通过实验验证了其有效性。
%
%在\ref{sec:Integer}小节，我们介绍了扩展的整数RangeInteger，相比于整数，其具体定义了$ +\infty $和$ -\infty $的概念，同时，我们介绍了有$ -\infty, +\infty $参与的整数运算规则，为后续介绍区间抽象域奠定了基础。在\ref{sec:Range}小节，介绍了基于扩展整数的区间Range，它以单独区间的形式表示了一个整型变量的可能取值范围，并首次定义整数区间上的运算规则。
%
%随后，在\ref{sec:MultiRange}和\ref{sec:SignRange}小节，我们介绍了线性多区间MultiRange与位敏感的线性多区间SignRange，它们的提出分别解决了单独的Range区间精度不足以及无法描述符号性的问题。随后为了进一步提升多区间在区间长度较小时的精度，提出了基于拆分-合并思想的精度提升方法。
%
%最后，结合CPA，提出了基于区间算数的缺陷检测方法。该方法基于区间状态RangeState抽象域，它是CFA上程序状态节点的抽象。通过设计抽象域与变迁规则，可以得到整型变量在程序指令执行前后的取值区间，从而实现整型缺陷分析，并通过实验验证了有效性。
%
%在实验中，测试用例的误报主要原自基于for循环的检测。由于循环摘要的精度受制于循环不变式技术，为了进一步提升整型缺陷分析在循环中的精度，后续的工作重点将集中在循环不变式上。